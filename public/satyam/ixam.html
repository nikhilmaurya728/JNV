<!DOCTYPE html>
<html lang="hi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@JNVPathshala</title>

  <link rel="stylesheet" href="penStyle.css">
  <link rel="stylesheet" href="style.css">

</head>

<body>
  <header>
    <div>


      <button class="toggle-btn" id="fullscreenBtn" title="Toggle Fullscreen">‚õ∂</button>

      <span class="brand-title" onclick="window.location.href='index.html'" style="cursor: pointer;">JNV Pathshala</span>
    </div>

    <div class="header-right">
      <span class="timer" id="timer">‚è≥ 10:00</span>
      <button class="headerBTN" id="timerBtn">Start</button>
    </div>
  </header>

  <div class="quizPage" id="quizPage">


    <div id="question-box" class="question-box">
      <h2 id="questionText">Loading...</h2>
      <div class="options" id="optionsBox"></div>
      <div id="explanation" class="explanation"></div>
    </div>

    <div class="result-card" id="resultCard"></div>

    <div id="onQueCard" class="onQueCard">
      <button id="prevBtn" onclick="prevQuestion()">Previous</button>
      <button id="submitBtn" onclick="submitQuiz()">Submit</button>
      <button id="goResult" onclick="goResult()">Result</button>

      <button id="seeAnswerBtn" onclick="toggleExplanation()" style="display:none;">Show</button>
      <button id="nextBtn" onclick="nextQuestion()">Next</button>
    </div>
    <div id="onResultCard" class="onResultCard">
      <button id="goOnQuiz" onclick="goOnQuiz()">Go On Quiz</button>
    </div>

  </div>


  <div class="adPage" id="adPage"
    style=" max-width: 700px; width: 100%; margin: 150px auto; padding: 0 15px; position: relative; box-sizing: border-box; ">
    <!-- Cross Button --> <button onclick="document.getElementById('adPage').style.display='none'"
      style=" position: absolute; top: 10px; right: 20px; background: #ff5e5e; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 16px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); ">‚úñ</button>
    <!-- Advertisement Box -->
    <div
      style=" background-color: #e1f8dc; border: 2px solid #009218; border-radius: 10px; padding: 15px; font-family: sans-serif; ">
      <h2 style="color: #00660d; margin-top: 0;">üì¢ AgriTour YouTube Channel</h2>
      <p style="font-size: 16px; color: #333;"> ‡§Ö‡§¨ ‡§∏‡§≠‡•Ä <strong>Agri related exams</strong> ‡§ï‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§ï‡§∞‡•ã ‡§π‡§Æ‡§æ‡§∞‡•á YouTube
        ‡§ö‡•à‡§®‡§≤ <strong style="color: #009218;">AgriTour</strong> ‡§ï‡•á ‡§∏‡§æ‡§•! üåæ<br><br> üëâ ‡§π‡§Æ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç <strong>quiz ‡§î‡§∞
          practice papers</strong> <em>‡§¨‡§ø‡§≤‡§ï‡•Å‡§≤ ‡§â‡§∏‡•Ä format</em> ‡§Æ‡•á‡§Ç ‡§ú‡•à‡§∏‡•á ‡§Ö‡§∏‡§≤‡•Ä exams ‡§Æ‡•á‡§Ç ‡§™‡•Ç‡§õ‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç!<br><br> üéØ
        Agriculture Supervisor, ICAR, AFO, RSMSSB, Bihar Krishi Bharti, ‡§î‡§∞ ‡§≠‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§ï‡•Å‡§õ! </p> <a
        href="https://www.youtube.com/@Bright_agro_classes" target="_blank"
        style=" display: inline-block; background-color: #009218; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: bold; margin-top: 10px; ">
        üîî Visit & Subscribe Now </a>
    </div>
  </div>








  <!--Start Pen Canvas -->
  <canvas id="overlayCanvas"></canvas>
  <!-- Floating Button Menu -->
  <div class="floating-menu" id="floatingMenu">

    <button id="actCan" class="tool-btn" onclick="activateCanvas()">üñãÔ∏è</button>
    <button style="background: #00e6cf;" id="deActCan" class="tool-btn" onclick="deactivateCanvas()">üñãÔ∏è</button>
    <button class="tool-btn" onclick="clearCanvas()">‚ùå</button>
    <button class="tool-btn tool-btn-changeColor" onclick="toggleEraser()">üßπ</button>

    <button style="color: #00f000;" class="tool-btn tool-btn-changeColor" onclick="changeColor('#00f000')">‚úé</button>

    <button style="color: blue;" class="tool-btn tool-btn-changeColor" onclick="changeColor('#0000ff')">‚úé</button>

    <button style="color: red;" class="tool-btn tool-btn-changeColor" onclick="changeColor('#ff0000')">‚úé</button>

    <button class="tool-btn tool-btn-changeColor" onclick="openColorPicker()">
      <input type="color" id="colorPicker" onclick="changeColor(this.value)" onchange="changeColor(this.value)">
    </button>

    <button class="tool-btn" style="font-size:medium;">
      <input id="penSizeSlider" type="range" min="1" max="20" value="8" onchange="changePenSize(this.value)" />
      <span id="penSizeValue">5</span>
    </button>

    <button id="mainToggleBtn" class="tool-btn show" onclick="toggleToolMenu()">‚ûï Tools</button>

  </div>
  <!--end Pen Canvas -->




  <script src="penScript.js"></script>
  <script src="data.js"></script>

  <script>
   // let toggle = document.getElementById("toggleSwitch");
    let menu = document.getElementById("floatingMenu");
    let savedState = localStorage.getItem('floatingMenuVisible');
    // üü¢ Load saved state on page load
    window.onload = function () {

      //const menu = document.getElementById('floatingMenu');

      if (savedState === 'show') {
        menu.style.display = 'block';
        menu.classList.add('active');
      
      } else {
        menu.style.display = 'none';
        menu.classList.remove('active');
      
      }
    };


  </script>

  <script>
    const params = new URLSearchParams(window.location.search);
    const examName = params.get('exam') || 'GK';     // Default: GK
    const paperNumber = params.get('paper') || '1';  // Default: 1

    let currentSet = window[`${examName}${paperNumber}`]; // e.g., GK2

    if (!currentSet || !Array.isArray(currentSet)) {
      alert(`‚ùå‚ùå ${examName} ‡§ï‡§æ quiz-${paperNumber} ‡§ï‡•á‡§µ‡§≤ Paid User ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à !`);
      throw new Error("Quiz data missing!");
    }

    const GK = currentSet;
    let currentQuestion = 0;
    let selectedAnswers = {};
    let quizSubmitted = false;
    let timer; // For interval
    //////////////////////
    let timerInterval;
    let totalSeconds = 10 * 60; // 10 minutes = 600 seconds
    let isRunning = false;
    let isStarted = false;

    const timerDisplay = document.getElementById("timer");
    const timerBtn = document.getElementById("timerBtn");

    function updateTimerDisplay() {
      const minutes = Math.floor(totalSeconds / 60);
      const seconds = totalSeconds % 60;
      timerDisplay.textContent = `‚è≥ ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        if (totalSeconds > 0) {
          totalSeconds--;
          updateTimerDisplay();
        } else {

          submitQuiz();
          alert("‚è∞ Time's up!");
        }
      }, 1000);
    }

    timerBtn.addEventListener("click", () => {
      if (!isStarted) {
        // First time start
        startTimer();
        isStarted = true;
        isRunning = true;
        timerBtn.textContent = "‚ùö‚ùö";

        document.getElementById('adPage').style.display = "none";
        document.getElementById('quizPage').style.display = "flex";

      } else if (isRunning) {
        // Pause
        clearInterval(timerInterval);
        isRunning = false;
        timerBtn.textContent = "‚ñ∂";

        document.getElementById('adPage').style.display = "flex";
        document.getElementById('quizPage').style.display = "none";
      } else {
        // Resume
        startTimer();
        isRunning = true;
        timerBtn.textContent = "‚ùö‚ùö";

        document.getElementById('adPage').style.display = "none";
        document.getElementById('quizPage').style.display = "flex";
      }
    });

    // Initialize display
    updateTimerDisplay();


    //////////////////////////





    if (quizSubmitted) {
      document.getElementById('submitBtn').style.display = 'none';
      document.getElementById('goResult').style.display = 'block';
    } else {
      document.getElementById('submitBtn').style.display = 'block';
      document.getElementById('goResult').style.display = 'none';
    }

    function goResult() {
      document.getElementById('onResultCard').style.display = 'flex';
      document.getElementById('onQueCard').style.display = 'none';


      document.getElementById('question-box').style.display = 'none';
      document.getElementById('onResultCard').style.display = 'flex';
      document.getElementById('onQueCard').style.display = 'none';

      showResultCard();
    }

    function goOnQuiz() {
      document.getElementById('resultCard').style.display = 'none';
      document.getElementById('question-box').style.display = 'block';

      document.getElementById('onResultCard').style.display = 'none';
      document.getElementById('onQueCard').style.display = 'flex';

      if (quizSubmitted) {
        document.getElementById('submitBtn').style.display = 'none';
        document.getElementById('goResult').style.display = 'block';
      } else {
        document.getElementById('submitBtn').style.display = 'block';
        document.getElementById('goResult').style.display = 'none';
      }
    }


    document.getElementById('onResultCard').style.display = 'none';
    document.getElementById('onQueCard').style.display = 'flex';

    /*
    let timeLeft = 600; // 10 minutes in seconds
        function startTimer() {
          timer = setInterval(() => {
            const minutes = String(Math.floor(timeLeft / 60)).padStart(2, '0');
            const seconds = String(timeLeft % 60).padStart(2, '0');
            document.getElementById('timer').innerText = `‚è≥ ${minutes}:${seconds}`;
            timeLeft--;
    
            if (timeLeft < 0) {
              clearInterval(timer);
              alert("‚è∞ Time's up! Quiz auto-submitted.");
              submitQuiz();
            }
          }, 1000);
        }
    */
    document.getElementById('submitBtn').disabled = true;



    function loadQuestion() {
      const q = GK[currentQuestion];
      document.getElementById('questionText').innerText = `${q.id}: ${q.question}`;
      const optionsBox = document.getElementById('optionsBox');
      optionsBox.innerHTML = '';

      q.options.forEach((opt, i) => {
        const optionLetter = String.fromCharCode(65 + i);
        const div = document.createElement('div');
        div.classList.add('option');
        div.innerText = `${optionLetter}. ${opt}`;
        div.dataset.letter = optionLetter;

        if (quizSubmitted) {
          if (selectedAnswers[currentQuestion] === optionLetter) {
            if (optionLetter === q.rightAnswer) {
              div.classList.add('correct');
              div.innerHTML += '<span class="symbol">‚úî</span>';
            } else {
              div.classList.add('wrong');
              div.innerHTML += '<span class="symbol">‚úò</span>';
            }
          } else if (optionLetter === q.rightAnswer) {
            div.classList.add('correct');
          }
        } else {
          if (selectedAnswers[currentQuestion] === optionLetter) {
            div.classList.add('selected');
          }

          /* div.addEventListener('click', () => {
            selectedAnswers[currentQuestion] = optionLetter;
            loadQuestion();
          });*/

let pressTimer;

// Add both mouse and touch events
div.addEventListener('mousedown', startPress);
div.addEventListener('touchstart', startPress, { passive: true });

div.addEventListener('mouseup', cancelPress);
div.addEventListener('mouseleave', cancelPress);
div.addEventListener('touchend', cancelPress);
div.addEventListener('touchcancel', cancelPress);

div.addEventListener('click', () => {
  if (selectedAnswers[currentQuestion] !== optionLetter) {
    selectedAnswers[currentQuestion] = optionLetter;
    loadQuestion();
  }
});

function startPress(e) {
  // Prevent scrolling on touch devices
  if (e.type === "touchstart") {
    e.preventDefault?.();
  }

  pressTimer = setTimeout(() => {
    if (selectedAnswers[currentQuestion] === optionLetter) {
      delete selectedAnswers[currentQuestion];
      loadQuestion();
    }
  }, 700); // long press = 700ms
}

function cancelPress() {
  clearTimeout(pressTimer);
}



        }

        optionsBox.appendChild(div);
      });

      document.getElementById('prevBtn').disabled = currentQuestion === 0;
      if (currentQuestion === GK.length - 1) {
        document.getElementById('nextBtn').disabled = true;
        document.getElementById('submitBtn').disabled = false;
      } else {
        document.getElementById('nextBtn').disabled = false;
        document.getElementById('submitBtn').disabled = true;
      }

      document.getElementById('seeAnswerBtn').style.display = quizSubmitted ? 'inline-block' : 'none';
      document.getElementById('explanation').style.display = 'none';
    }

    function prevQuestion() {
      if (currentQuestion > 0) {
        currentQuestion--;
        loadQuestion();
      }
    }

    function nextQuestion() {
      if (currentQuestion < GK.length - 1) {
        currentQuestion++;
        loadQuestion();
      }
    }

    function submitQuiz() {

      clearInterval(timerInterval);
      timerBtn.textContent = "Start";
      isRunning = false;
      isStarted = false;
      document.getElementById('timerBtn').style.display = "none";


      if (quizSubmitted) return;

      document.getElementById('question-box').style.display = 'none';
      document.getElementById('onResultCard').style.display = 'flex';
      document.getElementById('onQueCard').style.display = 'none';

      quizSubmitted = true;
      // clearInterval(timer);
      loadQuestion();
      showResultCard();
    }

    function toggleExplanation() {
      const expl = GK[currentQuestion].explanation;
      const explDiv = document.getElementById('explanation');
      explDiv.innerText = expl;
      explDiv.style.display = 'block';
    }

    function showResultCard() {
      let total = GK.length;
      let correct = 0;
      let attempted = 0;

      GK.forEach((q, i) => {
        const selected = selectedAnswers[i];
        if (selected) {
          attempted++;
          if (selected === q.rightAnswer) correct++;
        }
      });

      const resultCard = document.getElementById('resultCard');
      resultCard.innerHTML = `
      <h3>üéâ Result Card</h3>
      <p>‚úÖ Attempted: ${attempted} / ${total}</p>
      <p>‚úî Correct: ${correct}</p>
      <p>üìä Score: ${correct} / ${total}</p>
      
    `;
      resultCard.style.display = 'block';
    }




    loadQuestion();
    // startTimer();
  </script>
    <script>
    const btn = document.getElementById('fullscreenBtn');

    btn.addEventListener('click', async () => {
      if (!document.fullscreenElement) {
        await openFullscreen(document.documentElement);
      } else {
        await closeFullscreen();
      }
    });

    async function openFullscreen(elem) {
      try {
        if (elem.requestFullscreen) {
          await elem.requestFullscreen();
        } else if (elem.webkitRequestFullscreen) {
          await elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) {
          await elem.msRequestFullscreen();
        }
      } catch (err) {
        console.error("‚ùå Error entering fullscreen:", err);
      }
    }

    async function closeFullscreen() {
      try {
        if (document.fullscreenElement) {
          await document.exitFullscreen();
        }
      } catch (err) {
        console.error("‚ùå Error exiting fullscreen:", err);
      }
    }

    // üîÑ Listen to fullscreen change and update icon automatically
    document.addEventListener('fullscreenchange', () => {
      if (document.fullscreenElement) {
        btn.textContent = '‚õå '; // fullscreen active
      } else {
        btn.textContent = '‚õ∂'; // fullscreen off
      }
    });
  </script>

</body>

</html>